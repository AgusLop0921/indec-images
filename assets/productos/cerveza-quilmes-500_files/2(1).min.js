(window.webpackJsonpdiscoargentina_search_result_custom_1_0_9=window.webpackJsonpdiscoargentina_search_result_custom_1_0_9||[]).push([[2],{70:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var a=r(7),c=r(29),n=r.n(c),o=r(12),u=r(49),s=r(13),p=r(0),i=r(1),g=r(4),f=r(6),h=r(78);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b="next",P="previous",v="choose";function j(e,t){var r=t.args,a=r.maxItemsPerPage,c=r.to,n=r.from,o=r.rollbackState,u=r.pageChoose,s=r.previous;switch(t.type){case"RESET":return{page:1,nextPage:2,previousPage:0,from:0,to:a-1};case"NEXT_PAGE":return O(O({},e),{},{page:e.nextPage,nextPage:e.nextPage+5>e.totalPages?e.totalPages:e.nextPage+5,previousPage:e.nextPage-5,from:n,to:c});case"PREVIOUS_PAGE":return O(O({},e),{},{page:e.previousPage,nextPage:e.previousPage+5>e.totalPages?e.totalPages:e.nextPage+5,previousPage:e.previousPage>5?e.previousPage-5:1,from:n,to:c});case"CHOOSE_PAGE":return O(O({},e),{},{page:u,nextPage:u+5>e.totalPages?e.totalPages:u+5,previousPage:s>5?s-5:1,from:n,to:c});case"ROLLBACK":return o}}var d=function(){var e=Object(u.a)(n.a.mark((function e(t,r,a,c,u,s,p,i,g,f,h){var l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.current&&0!==p.length){e.next=2;break}return e.abrupt("return");case 2:return l=a===b,a===v,c.current=!0,u(!0),e.abrupt("return",s({variables:{from:t,to:r,fuzzy:g,operator:f,searchState:h},updateQuery:function(e,t){var r=t.fetchMoreResult;if(u(!1),c.current=!1,p&&r)return e&&e.search?{search:O(O({},e.search),{},{products:l?[].concat(Object(o.a)(e.search.products),Object(o.a)(r.search.products)):[].concat(Object(o.a)(r.search.products),Object(o.a)(e.search.products))})}:O(O({},r),{},{productSearch:O(O({},r.productSearch),{},{products:Object(o.a)(r.productSearch.products)})});i.current=!0}}).catch((function(e){return u(!1),c.current=!1,i.current=!0,{error:e}})));case 7:case"end":return e.stop()}}),e)})));return function(t,r,a,c,n,o,u,s,p,i,g){return e.apply(this,arguments)}}(),m=function(e){var t=e.page,r=(e.recordsFiltered,e.maxItemsPerPage),c=e.fetchMore,o=e.products,s=e.queryData,l=s.query,O=s.map,m=s.orderBy,S=s.priceRange,y=e.totalNumberProducts,x=Object(g.useRuntime)(),E=x.setQuery,w=x.query,_=Object(h.a)(),R=_.fuzzy,k=_.operator,C=_.searchState,A=w.page&&Number(w.page)||t,I=Math.min(Math.ceil(y/r),50),M={nextPage:A+5>I?I:A+5,previousPage:A>5?A-5:1,from:(t-1)*r,to:A*r-1,page:A,totalPages:I},z=Object(p.useReducer)(j,M),L=Object(a.a)(z,2),F=L[0],G=L[1],D=function(){var e=Object(p.useState)(!1),t=Object(a.a)(e,2),r=t[0],c=t[1],n=Object(f.useSearchPageState)().isFetchingMore,o=Object(f.useSearchPageStateDispatch)();return[null==n?r:n,Object(p.useCallback)((function(e){o({type:"SET_FETCHING_MORE",args:{isFetchingMore:e}}),c(e)}),[o])]}(),N=Object(a.a)(D,2),T=N[0],B=N[1],K=Object(p.useRef)(!0),q=Object(p.useRef)(!1),H=Object(p.useState)(!1),Q=Object(a.a)(H,2),J=Q[0],U=Q[1],V=Object(p.useRef)(!1);Object(p.useEffect)((function(){K.current||G({type:"RESET",args:{maxItemsPerPage:r}}),K.current=!1}),[r,l,O,m,S]);var X=function(){var e=Object(u.a)(n.a.mark((function e(){var t,a,u,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=F,u=F.to+1,s=u+r-1,U(!1),G({type:"NEXT_PAGE",args:{to:s,from:u}}),E({page:F.nextPage},{replace:!0}),e.next=8,d(u,s,b,q,B,c,o,V,R,k,null!==(t=sessionStorage.getItem("searchState"))&&void 0!==t?t:C);case 8:e.sent&&V.current&&(G({type:"ROLLBACK",args:{rollbackState:a}}),E({page:F.page},{replace:!0}),U(!0),V.current=!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(u.a)(n.a.mark((function e(t){var a,u,s,p,i,g;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=F,s=parseInt(t.target.value),p=s-1,g=(i=s*r-1)-r+1,U(!1),G({type:"CHOOSE_PAGE",args:{to:i,from:g,pageChoose:s,previous:p}}),E({page:s},{replace:!0}),e.next=10,d(g,i,v,q,B,c,o,V,R,k,null!==(a=sessionStorage.getItem("searchState"))&&void 0!==a?a:C);case 10:e.sent&&V.current&&(G({type:"ROLLBACK",args:{rollbackState:u}}),E({page:F.page},{replace:!0}),U(!0),V.current=!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{handleFetchMoreNext:X,handleFetchMorePrevious:function(){var e=Object(u.a)(n.a.mark((function e(){var t,a,u,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=F,u=F.from-1,s=Object(i.max)(0,u-r+1),U(!1),G({type:"PREVIOUS_PAGE",args:{to:u,from:s}}),E({page:F.previousPage},{replace:!0,merge:!0}),e.next=8,d(s,u,P,q,B,c,o,V,R,k,null!==(t=sessionStorage.getItem("searchState"))&&void 0!==t?t:C);case 8:e.sent&&V.current&&(G({type:"ROLLBACK",args:{rollbackState:a}}),E({page:F.page},{replace:!0,merge:!0}),U(!0),V.current=!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),handleFetchChoosePage:W,loading:T,from:F.from,to:F.to,totalPages:I,currPage:F.page,infiniteScrollError:J}}},78:function(e,t,r){"use strict";var a=r(6),c=r(1);t.a=function(){var e=Object(a.useSearchPage)().searchQuery;return{fuzzy:Object(c.path)(["data","productSearch","fuzzy"],e),operator:Object(c.path)(["data","productSearch","operator"],e),searchState:Object(c.path)(["data","productSearch","searchState"],e)}}}}]);