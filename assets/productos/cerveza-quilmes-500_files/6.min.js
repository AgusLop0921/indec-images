(window.webpackJsonpvtex_search_result_3_140_0=window.webpackJsonpvtex_search_result_3_140_0||[]).push([[6],{96:function(e,t,r){"use strict";var a=r(11),c=r(35),n=r.n(c),i=r(8),s=r(12),o=r(50),u=r(1),l=r(0),f=r(40),p=r(3),d=r(71),b=r.n(d),h=r(72),v=r.n(h),O=r(73),m=r.n(O),y=r(37),j=function(){var e=Object(p.useRuntime)().navigate;return{setRedirect:function(t){if(t){var r=/((http(s)?:)?\/\/|www\.)/;if(r.test(t)){var a=t.replace(r,""),c=window.location.origin.replace(/(http(s)?:)?\/\//,"");a.startsWith(c)?e({to:a.replace(c,"")}):window.location.replace(t.replace(/^www/,"https://www"))}else e({to:t})}}}},g=function(){var e=Object(p.useRuntime)().rootPath;return{getSession:Object(l.useCallback)(Object(o.a)(n.a.mark((function t(){var r,a,c,i,s,o,u;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=new Headers).append("Content-Type","application/json"),s={method:"GET",headers:i,redirect:"follow"},t.next=5,fetch("".concat(e||"","/api/sessions?items=public.shippingOption"),s);case 5:return o=t.sent,t.next=8,o.json();case 8:if(u=t.sent,null===(c=null===(a=null===(r=null==u?void 0:u.namespaces)||void 0===r?void 0:r.public)||void 0===a?void 0:a.shippingOption)||void 0===c?void 0:c.value){t.next=11;break}return t.abrupt("return",null);case 11:return t.abrupt("return",JSON.parse(u.namespaces.public.shippingOption.value));case 12:case"end":return t.stop()}}),t)}))),[e])}},w=r(48),S=r(74);var x=function(e){if(S.canUseDOM)for(var t="".concat(e,"="),r=decodeURIComponent(document.cookie).split(";"),a=0;a<r.length;a++){for(var c=r[a];" "===c.charAt(0);)c=c.substring(1);if(0===c.indexOf(t))return c.substring(t.length,c.length)}};function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var R="Static",T="MAX_WITHOUT_INTEREST",F="ALL_AVAILABLE",z="default",_="OrderByScoreDESC",B=function(e,t){return!!(e&&e.length>0&&t&&t.length>0)},I=function(e,t){return e.current!==t},k=function(e,t,r){var a=Object(p.useRuntime)(),c=a.getSettings,s=a.query,u=c("vtex.store"),d=null==u?void 0:u.enableFiltersFetchOptimization,h=Object(f.useQuery)(v.a,{variables:P(P({},e),{},{variant:x("sp-variant"),advertisementOptions:{showSponsored:!0,sponsoredCount:3,advertisementPlacement:"top_search",repeatSponsoredProducts:!0}})}),O=h.refetch,j=h.loading,g=h.fetchMore,S=Object(f.useQuery)(m.a,{variables:{query:e.query,fullText:e.fullText,selectedFacets:e.selectedFacets}}).data,M=(S=void 0===S?{}:S).searchMetadata,T=Object(f.useQuery)(b.a,{variables:{query:t.facetQuery,map:t.facetMap,from:d?0:void 0,to:d?y.a:void 0,fullText:e.fullText,selectedFacets:e.selectedFacets,hideUnavailableItems:e.hideUnavailableItems,behavior:e.facetsBehavior||R,categoryTreeBehavior:e.categoryTreeBehavior,operator:e.operator,fuzzy:e.fuzzy,searchState:e.searchState||void 0,initialAttributes:s&&s.initialMap?s.initialMap:r&&-1===t.facetMap.indexOf("price")?"".concat(t.facetMap,",price"):t.facetMap,variant:x("sp-variant")},skip:!t.withFacets}),F=T.data,z=(F=void 0===F?{}:F).facets,_=T.loading,B=T.refetch,I=T.fetchMore,k=function(e,t){return Object(l.useCallback)(function(){var r=Object(o.a)(n.a.mark((function r(a){var c,s,o,u,l,f,p,d,b,h,v,O,m,y,j,g,S,x,M;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a&&(o=a.query,u=a.map,l=a.priceRange,f=a.facetQuery,p=a.facetMap,c=P(P({},a),{},{withFacets:!1}),s={query:a.facetQuery,map:a.facetMap,hideUnavailableItems:a.hideUnavailableItems,behavior:a.facetsBehavior},o&&u&&(d=Object(w.b)(o,u,l),b=Object(i.a)(d,2),h=b[0],v=b[1],c=P(P({},c),{},{selectedFacets:h,fullText:v})),f&&p&&(O=Object(w.b)(f,p,l),m=Object(i.a)(O,2),y=m[0],j=m[1],s=P(P({},s),{},{selectedFacets:y,fullText:j}))),r.next=3,Promise.all([e&&e(c),t&&t(s)]);case 3:return g=r.sent,S=Object(i.a)(g,2),x=S[0],M=S[1],r.abrupt("return",P(P({},x),{},{data:P(P({},x.data||{}),{},{facets:M.data&&M.data.facets}),errors:x.errors||M.errors}));case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),[e,t])}(O,B),q=z&&z.facets?Object(w.c)(z.facets):{brands:[],brandsQuantity:0,specificationFilters:[],categoriesTrees:[],priceRanges:[],deliveries:[]},Q=z&&z.queryArgs&&z.queryArgs.selectedFacets,E=Q&&Object(w.a)(Q),A=h&&h.data&&h.data.productSearch&&h.data.productSearch.redirect;return{loading:j||A,facetsLoading:_,fetchMore:g,data:{productSearch:h.data&&h.data.productSearch,facets:P(P({},q),{},{queryArgs:E,breadcrumb:z&&z.breadcrumb,facetsFetchMore:I,sampling:null==z?void 0:z.sampling}),searchMetadata:M},productSearchResult:h,refetch:k}};t.a=function(e){var t,r=e.maxItemsPerPage,c=e.query,s=e.map,f=e.orderBy,d=e.priceRange,b=e.hideUnavailableItems,h=e.facetsBehavior,v=e.categoryTreeBehavior,O=e.pageQuery,m=e.skusFilter,y=e.simulationBehavior,S=e.installmentCriteria,x=e.excludedPaymentSystems,M=e.includedPaymentSystems,q=e.children,Q=e.operator,E=e.fuzzy,A=e.searchState,U=e.lazyItemsQuery,C=e.__unstableProductOriginVtex,L=(e.sponsoredProductsBehavior,Object(w.b)(c,s,d)),D=Object(i.a)(L,2),J=D[0],V=D[1],H=Object(l.useState)([]),N=Object(i.a)(H,2),W=N[0],G=N[1],X=null===(t=(0,Object(p.useRuntime)().getSettings)("vtex.store"))||void 0===t?void 0:t.enableLazySearchQuery,K=r>18&&("boolean"==typeof U?U:X),Y=K?18:r,Z=function(e,t,r,a){var c=Object(l.useRef)(e),n=Object(l.useRef)(t),i=Object(l.useRef)(r),s=Object(l.useRef)(a);return I(c,e)||I(n,t)||I(i,r)||I(s,a)}(c,s,f,d),$=function(e,t){var r=Object(l.useRef)(e);return t&&(r.current=1),r.current}(O?parseInt(O,10):1,Z),ee=function(e,t,r,a){var c=Object(l.useRef)(a),n=I(c,a),i={fuzzy:n?void 0:e,operator:n?void 0:t,searchState:n?void 0:r};return c.current=a,i}(E,Q,A,V),te=ee.fuzzy,re=ee.operator,ae=ee.searchState,ce=j().setRedirect,ne=($-1)*r,ie=ne+Y-1,se={facetQuery:c,facetMap:s,withFacets:B(s,c)},oe=g().getSession;Object(l.useEffect)((function(){function e(){return(e=Object(o.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe();case 2:(t=e.sent)&&!Object(u.equals)(t,W)&&G(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[W,oe,J]);var ue=Object(l.useMemo)((function(){return{map:s,query:c,orderBy:f||_,from:ne,to:ie,selectedFacets:null==J?void 0:J.concat(W),fullText:V,operator:re,fuzzy:te,searchState:ae,excludedPaymentSystems:x,includedPaymentSystems:M,productOriginVtex:!!C,hideUnavailableItems:!!b,facetsBehavior:h||R,categoryTreeBehavior:v,withFacets:!1,skusFilter:m||F,simulationBehavior:y||z,installmentCriteria:S||T}}),[s,c,f,ne,ie,b,h,v,m,y,S,J,W,V,re,te,ae,C,x,M]),le=k(ue,se,d),fe=le.data,pe=le.loading,de=le.refetch,be=le.productSearchResult,he=le.facetsLoading,ve=le.fetchMore,Oe=fe&&fe.productSearch&&fe.productSearch.redirect;Object(l.useEffect)((function(){ce(Oe)}),[Oe,ce]);var me=Object(l.useRef)(!1),ye=Object(l.useState)(K?r-Y:0),je=Object(i.a)(ye,2),ge=je[0],we=je[1];Object(l.useEffect)((function(){we(K?r-Y:0)}),[s,c,ne,K,r,Y]),Object(l.useEffect)((function(){if(K){var e=setTimeout((function(){0===ge||me.current||(me.current=!0,ve({variables:{from:ne+18,to:ne+r-1},updateQuery:function(e,t){var r=t.fetchMoreResult;return me.current=!1,we(0),P(P({},e),{},{productSearch:P(P({},e.productSearch),{},{products:[].concat(Object(a.a)(e.productSearch.products),Object(a.a)(r.productSearch.products))})})}}))}),500);return function(){clearTimeout(e)}}}),[fe,ve,ne,K,r,ge,Y]);var Se=Object(l.useMemo)((function(){return P(P(P({},ue),se),{},{maxItemsPerPage:r,lazyItemsRemaining:ge,page:$,facetsLoading:he})}),[ue,se,r,ge,$,he]);return q(Object(l.useMemo)((function(){return P(P({},be||{}),{},{variables:ue,data:fe,loading:pe,refetch:de})}),[fe,pe,be,de,ue]),Se)}}}]);